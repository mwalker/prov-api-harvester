# PROV API Harvester

## Description

PROV API Harvester is a collection of python scripts designed to harvest metadata records from the [Public Record Office Victoria (PROV) API](https://prov.vic.gov.au/prov-collection-api).


## Requirements

- Python 3
- ijson
- requests
- zstandard

uv makes it easier, the dependencies are all specified in the inline metadata.


## Usage

The easiest way to run the scripts from the command line is using uv:

```
uv run prov-api-harvest.py <options>
uv run prov-harvest-stats.py <options>
uv run prov-api-track.py <options>
```

*Warning*: A full harvest using --series-batch will take over one hour and uncompressed is of the order of 22GB (using the traditional mode will take over eight hours). I'd strongly suggest using the optional zstd compression, which will bring it down to under 2GB. Recompressing with zstd -5 will get you close to 1GB.

Extracting the stats from the full harvest takes about six minutes but the file is a much more manageable 7MB or so. I will keep a reasonably up to date copy: [prov-stats.json](prov-stats.json)


## Tracking

This repo is also set up to track data for PROV functions, agencies, series and consignments, using a technique called [git-scraping](https://simonwillison.net/2020/Oct/9/git-scraping/). A github action spins up once a day and grabs the latest version of data for each of these and if any have changed commits them back to the repo with a useful commit message generated by [csv-diff](https://github.com/simonw/csv-diff). You can subscribe to the feed of changes via github using the link below.

- [prov-functions.json](prov-functions.json)
- [prov-agencies.json](prov-agencies.json)
- [prov-series.json](prov-series.json)
- [prov-consignments.json](prov-consignments.json)

In June 2025 the initial automated commits were regenerated using a new commit message generator that builds on the default csv-diff behaviour to specifically list summaries of new additions (for all types) and openings (for series and consignments only). This means that all the previous commit ids have changed and the references to them in github actions will no longer work. The infrastructure to do this again in the future has been left in place in case of future improvements to the commit messages that justify it.

## Licence

This project is open source and is licenced under the Apache License, Version 2.0, ([LICENSE](LICENSE) or
https://www.apache.org/licenses/LICENSE-2.0).

The data is licenced by PROV for non-commercial purposes under a (CC-BY-NC licence)[https://creativecommons.org/licenses/by-nc/4.0/]


## Feed

[Atom](https://github.com/mwalker/prov-api-harvester/commits/main.atom)
