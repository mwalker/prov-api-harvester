# PROV API Harvester

## Description

PROV API Harvester is a collection of python scripts designed to harvest metadata records from the [Public Record Office Victoria (PROV) API](https://prov.vic.gov.au/prov-collection-api).


## Requirements

- Python 3
- ijson
- requests
- xattr
- zstandard

uv makes it easier, the dependencies are all specified in the inline metadata.


## Usage

The easiest way to run the scripts from the command line is using uv:

```
uv run prov-api-harvest.py <options>
uv run prov-harvest-stats.py <options>
uv run prov-api-track.py <options>
```

*Warning*: A full harvest will take at least 6 hours and uncompressed is of the order of 22GB. I'd strongly suggest using the optional zstd compression, which will bring it down to under 2GB. Recompressing with zstd -5 will get you close to 1GB.

Extracting the stats from the full harvest takes about a half hour but the file is a much more manageable 7MB or so.


## Tracking

This repo is also set up to track data for PROV functions, agencies, series and consignments, using a technique called [git-scraping](https://simonwillison.net/2020/Oct/9/git-scraping/). A github action spins up once a day and grabs the latest version of data for each of these and if any have changed commits them back to the repo with a useful commit message generated by [csv-diff](https://github.com/simonw/csv-diff). You can subscribe to the feed of changes via github using the link below.

- [prov-functions.json]()
- [prov-agencies.json]()
- [prov-series.json]()
- [prov-consignments.json]()

## Licence

This project is open source and is licenced under the Apache License, Version 2.0, ([LICENSE](LICENSE) or
https://www.apache.org/licenses/LICENSE-2.0).

The data is licenced by PROV for non-commercial purposes under a (CC-BY-NC licence)[https://creativecommons.org/licenses/by-nc/4.0/]


## Feed

[Atom](https://github.com/mwalker/prov-api-harvester/commits/main.atom)
